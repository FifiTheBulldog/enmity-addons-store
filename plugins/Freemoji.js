function p(e){window.enmity.plugins.registerPlugin(e)}const s={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function h(...e){return window.enmity.modules.bulk(...e)}function b(e){return window.enmity.patcher.create(e)}var f="Send external emoji without Nitro as image links",S="1.1.3";const n=b("freemoji");let{Messages:r}=window.enmity.modules.common;r||(r=window.enmity.modules.common.messages);const[a,d,{getChannel:E}]=h(s.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),s.byProps("openLazy","hideActionSheet"),s.byProps("getChannel")),j={name:"Freemoji",version:S,description:f,authors:[{name:"FifiTheBulldog",id:"690213339862794285"}],color:"#f9a418",onStart(){let e=!0;n.before(d,"openLazy",(y,[,o,{pickerIntention:m}])=>{switch(o){case"EmojiPickerActionSheet":if(m!==0)break;case"MessageLongPressActionSheet":e=!1}}),n.after(d,"hideActionSheet",()=>{e=!0});const c=n.before(a,"canUseEmojisEverywhere",(y,[{premiumType:o}])=>{c(),o||(n.instead(a,"canUseEmojisEverywhere",()=>e),n.instead(a,"canUseAnimatedEmojis",()=>e),n.before(r,"sendMessage",(m,[u,t])=>{const w=E(u);t.validNonShortcutEmojis.forEach((i,g)=>{var l;(i.guildId!==w.guild_id||i.animated)&&(t.content=t.content.replace(`<${i.animated?"a":""}:${(l=i.originalName)!=null?l:i.name}:${i.id}>`,i.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete t.validNonShortcutEmojis[g])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(i=>i)}))})},onStop(){n.unpatchAll()}};p(j);
