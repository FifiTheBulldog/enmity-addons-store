function u(e){window.enmity.plugins.registerPlugin(e)}const a={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function y(...e){return window.enmity.modules.bulk(...e)}function w(e){return window.enmity.patcher.create(e)}async function p(){return new Promise((e,n)=>{window.enmity.users.fetchCurrentUser().then(s=>{e(s)}).catch(n)})}var f="Send external emoji without Nitro as image links",h="1.1.1";const o=w("freemoji"),{messages:b}=window.enmity.modules.common,[m,l,{getChannel:g}]=y(a.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),a.byProps("openLazy","hideActionSheet"),a.byProps("getChannel")),S={name:"Freemoji",version:h,description:f,authors:[{name:"FifiTheBulldog",id:"690213339862794285"}],color:"#f9a418",onStart(){p().then(({premiumType:e})=>{if(!e){let n=!0;o.instead(m,"canUseEmojisEverywhere",()=>n),o.instead(m,"canUseAnimatedEmojis",()=>n),o.before(b,"sendMessage",(s,[r,t])=>{const d=g(r);t.validNonShortcutEmojis.forEach((i,c)=>{(i.guildId!==d.guild_id||i.animated)&&(t.content=t.content.replace(`<${i.animated?"a":""}:${i.name}:${i.id}>`,i.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete t.validNonShortcutEmojis[c])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(i=>i)}),o.before(l,"openLazy",(s,r)=>{r[1]==="EmojiPickerActionSheet"&&(n=r[2].pickerIntention===0)}),o.after(l,"hideActionSheet",()=>{n=!0})}})},onStop(){o.unpatchAll()}};u(S);
