function u(o){window.enmity.plugins.registerPlugin(o)}const a={byProps:(...o)=>window.enmity.modules.filters.byProps(...o),byName:(o,m)=>window.enmity.modules.filters.byName(o,m),byTypeName:(o,m)=>window.enmity.modules.filters.byTypeName(o,m),byDisplayName:(o,m)=>window.enmity.modules.filters.byDisplayName(o,m)};function y(...o){return window.enmity.modules.bulk(...o)}function p(...o){return window.enmity.modules.getByProps(...o)}window.enmity.modules.common,window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const g=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;function h(o){return window.enmity.patcher.create(o)}var f="Freemoji",v="Send external emoji without Nitro as image links",S="2.0.1",b="#f9a418",N=[{name:"colin273",id:"690213339862794285"}],E={name:f,description:v,version:S,color:b,authors:N};const i=h("freemoji"),[l,{getChannel:j}]=y(a.byProps("openLazy","hideActionSheet"),a.byProps("getChannel")),t=p("canUseEmojisEverywhere","canUseAnimatedEmojis",{defaultExport:!1});let w;const P={...E,onStart(){let o=!0;i.before(l,"openLazy",(m,[,s,{pickerIntention:n}])=>{switch(s){case"EmojiPickerActionSheet":if(n!==0)break;case"MessageLongPressActionSheet":o=!1}}),i.after(l,"hideActionSheet",()=>{o=!0}),w=t.default,t.default={...t.default,canUseEmojisEverywhere:()=>o,canUseAnimatedEmojis:()=>o},i.before(g,"sendMessage",(m,[s,n])=>{const c=j(s);n.validNonShortcutEmojis.forEach((e,r)=>{var d;(e.guildId!==c.guild_id||e.animated)&&(n.content=n.content.replace(`<${e.animated?"a":""}:${(d=e.originalName)!=null?d:e.name}:${e.id}>`,e.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete n.validNonShortcutEmojis[r])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(e=>e)})},onStop(){i.unpatchAll(),t.default=w}};u(P);
