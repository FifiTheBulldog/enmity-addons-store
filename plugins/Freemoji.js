function w(e){window.enmity.plugins.registerPlugin(e)}const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function p(...e){return window.enmity.modules.bulk(...e)}function h(e){return window.enmity.patcher.create(e)}var b="Send external emoji without Nitro as image links",f="1.1.2";const n=h("freemoji"),{messages:g}=window.enmity.modules.common,[s,m,{getChannel:S}]=p(r.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),r.byProps("openLazy","hideActionSheet"),r.byProps("getChannel")),j={name:"Freemoji",version:f,description:b,authors:[{name:"FifiTheBulldog",id:"690213339862794285"}],color:"#f9a418",onStart(){let e=!0;n.before(m,"openLazy",(d,[,o,{pickerIntention:a}])=>{switch(o){case"EmojiPickerActionSheet":if(a!==0)break;case"MessageLongPressActionSheet":e=!1}}),n.after(m,"hideActionSheet",()=>{e=!0});const l=n.before(s,"canUseEmojisEverywhere",(d,[{premiumType:o}])=>{l(),o||(n.instead(s,"canUseEmojisEverywhere",()=>e),n.instead(s,"canUseAnimatedEmojis",()=>e),n.before(g,"sendMessage",(a,[c,t])=>{const y=S(c);t.validNonShortcutEmojis.forEach((i,u)=>{(i.guildId!==y.guild_id||i.animated)&&(t.content=t.content.replace(`<${i.animated?"a":""}:${i.name}:${i.id}>`,i.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete t.validNonShortcutEmojis[u])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(i=>i)}))})},onStop(){n.unpatchAll()}};w(j);
