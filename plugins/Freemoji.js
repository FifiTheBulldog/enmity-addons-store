function y(e){window.enmity.plugins.registerPlugin(e)}const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function u(...e){return window.enmity.modules.bulk(...e)}function g(e){return window.enmity.patcher.create(e)}const o=g("freemoji"),{messages:d}=window.enmity.modules.common,[a,{getEmojiURL:w},{getStickerById:b},{getChannel:l}]=u(r.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),r.byProps("getEmojiURL"),r.byProps("getStickerById"),r.byProps("getChannel")),p={name:"Freemoji",onStart(){o.instead(a,"canUseEmojisEverywhere",()=>!0),o.instead(a,"canUseAnimatedEmojis",()=>!0),o.before(d,"sendMessage",(c,[i,n])=>{const s=l(i);n.validNonShortcutEmojis.forEach((t,m)=>{t.guildId!==s.guild_id&&(t.size=24,n.content=n.content.replace(`<${t.animated?"a":""}:${t.name}:${t.id}>`,w(t).replace("webp","png")),delete n.validNonShortcutEmojis[m])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(t=>t)}),o.instead(a,"canUseStickersEverywhere",()=>!0);const{sendStickers:e}=d;o.before(d,"sendStickers",(c,i)=>{const n=l(i[0]),s=[];i[1].forEach((t,m)=>{b(t).guild_id!==n.guild_id&&(s.push(`https://media.discordapp.net/stickers/${t}?size=320`),delete i[1][m])}),i[1]=i[1].filter(t=>t),i[1]?e(...i):d.sendMessage(i[0],{content:s.join(`
`)})})},onStop(){o.unpatchAll()}};y(p);
