function a(e){window.enmity.plugins.registerPlugin(e)}const o={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function d(...e){return window.enmity.modules.bulk(...e)}function y(e){return window.enmity.patcher.create(e)}const t=y("freemoji"),{messages:u}=window.enmity.modules.common,[s,{getEmojiURL:c},{getChannel:w}]=d(o.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),o.byProps("getEmojiURL"),o.byProps("getChannel")),g={name:"Freemoji",onStart(){t.instead(s,"canUseEmojisEverywhere",()=>!0),t.instead(s,"canUseAnimatedEmojis",()=>!0),t.before(u,"sendMessage",(e,[r,i])=>{const m=w(r);i.validNonShortcutEmojis.forEach((n,l)=>{n.guildId!==m.guild_id&&(n.size=24,i.content=i.content.replace(`<${n.animated?"a":""}:${n.name}:${n.id}>`,c(n).replace("webp","png")),delete i.validNonShortcutEmojis[l])}),i.validNonShortcutEmojis=i.validNonShortcutEmojis.filter(n=>n)})},onStop(){t.unpatchAll()}};a(g);
