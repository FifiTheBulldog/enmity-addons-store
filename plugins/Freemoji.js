function p(e){window.enmity.plugins.registerPlugin(e)}const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function g(...e){return window.enmity.modules.bulk(...e)}function b(e){return window.enmity.patcher.create(e)}var f="Send external emoji without Nitro as image links",h="1.1.3";const n=b("freemoji"),{messages:S}=window.enmity.modules.common,[s,l,{getChannel:E}]=g(r.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),r.byProps("openLazy","hideActionSheet"),r.byProps("getChannel")),j={name:"Freemoji",version:h,description:f,authors:[{name:"FifiTheBulldog",id:"690213339862794285"}],color:"#f9a418",onStart(){let e=!0;n.before(l,"openLazy",(c,[,o,{pickerIntention:a}])=>{switch(o){case"EmojiPickerActionSheet":if(a!==0)break;case"MessageLongPressActionSheet":e=!1}}),n.after(l,"hideActionSheet",()=>{e=!0});const d=n.before(s,"canUseEmojisEverywhere",(c,[{premiumType:o}])=>{d(),o||(n.instead(s,"canUseEmojisEverywhere",()=>e),n.instead(s,"canUseAnimatedEmojis",()=>e),n.before(S,"sendMessage",(a,[y,t])=>{const u=E(y);t.validNonShortcutEmojis.forEach((i,w)=>{var m;(i.guildId!==u.guild_id||i.animated)&&(t.content=t.content.replace(`<${i.animated?"a":""}:${(m=i.originalName)!=null?m:i.name}:${i.id}>`,i.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete t.validNonShortcutEmojis[w])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(i=>i)}))})},onStop(){n.unpatchAll()}};p(j);
