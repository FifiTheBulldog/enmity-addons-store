function u(e){window.enmity.plugins.registerPlugin(e)}const a={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function y(...e){return window.enmity.modules.bulk(...e)}function w(e){return window.enmity.patcher.create(e)}async function p(){return new Promise((e,i)=>{window.enmity.users.fetchCurrentUser().then(s=>{e(s)}).catch(i)})}var h="Send external emoji without Nitro as image links",f="1.1.1";const o=w("freemoji"),{messages:b}=window.enmity.modules.common,[m,d,{getChannel:g}]=y(a.byProps("canUseEmojisEverywhere","canUseAnimatedEmojis"),a.byProps("openLazy","hideActionSheet"),a.byProps("getChannel")),S={name:"Freemoji",version:f,description:h,authors:[{name:"FifiTheBulldog",id:"690213339862794285"}],onStart(){p().then(({premiumType:e})=>{if(!e){let i=!0;o.instead(m,"canUseEmojisEverywhere",()=>i),o.instead(m,"canUseAnimatedEmojis",()=>i),o.before(b,"sendMessage",(s,[r,t])=>{const l=g(r);t.validNonShortcutEmojis.forEach((n,c)=>{(n.guildId!==l.guild_id||n.animated)&&(t.content=t.content.replace(`<${n.animated?"a":""}:${n.name}:${n.id}>`,n.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete t.validNonShortcutEmojis[c])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(n=>n)}),o.before(d,"openLazy",(s,r)=>{r[1]==="EmojiPickerActionSheet"&&(i=r[2].pickerIntention===0)}),o.after(d,"hideActionSheet",()=>{i=!0})}})},onStop(){o.unpatchAll()}};u(S);
