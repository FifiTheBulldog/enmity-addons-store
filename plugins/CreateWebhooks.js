function F(t){window.enmity.plugins.registerPlugin(t)}const h={byProps:(...t)=>window.enmity.modules.filters.byProps(...t),byName:t=>window.enmity.modules.filters.byName(t),byTypeName:t=>window.enmity.modules.filters.byTypeName(t),byTypeString:(...t)=>window.enmity.modules.filters.byTypeString(...t),byDefaultString:(...t)=>window.enmity.modules.filters.byDefaultString(...t),byString:(...t)=>window.enmity.modules.filters.byString(...t)};function E(t,n){return window.enmity.modules.getModule(t,n)}function B(...t){return window.enmity.modules.bulk(...t)}function _(t){return window.enmity.patcher.create(t)}const e=window.enmity.react,I=e.React;e.memo,e.useCallback,e.useContext,e.useEffect,e.useImperativeHandle,e.useMemo,e.useReducer,e.useRef,e.useState,e.Alert;const P=e.Button;e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio,e.FormRow,e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var C="Create webhooks from the webhook management screens",k="1.0.0";function x(t={},n=i=>i,{ignore:l=[],walkable:y=["props","children"],maxProperties:c=100}={}){let i=[t];const d=function(...o){try{return Reflect.apply(n,this,o)}catch{return!1}};for(;i.length&&c;){const o=i.shift();if(d(o))return o;if(Array.isArray(o))i.push(...o);else if(typeof o=="object"&&o!==null)if(y.length)for(const r in o){const a=o[r];~y.indexOf(r)&&!~l.indexOf(r)&&i.push(a)}else for(const r in o){const a=o[r];o&&~l.indexOf(r)||i.push(a)}c--}}var g,T,O;const b=_("create-webhooks"),[{create:A},{getChannels:N},{can:M},{Permissions:{MANAGE_WEBHOOKS:H}}]=B(h.byProps("update","create","fetchForChannel"),h.byProps("getChannels"),h.byProps("can","_dispatcher"),h.byProps("Permissions")),{NavigationContainer:R}=(g=window.enmity.modules.common.navigationNative)!=null?g:window.enmity.modules.common.NavigationNative,p=(O=(T=E(t=>{var n,l;return(l=(n=t==null?void 0:t.default)==null?void 0:n.Messages)==null?void 0:l.SETTINGS_WEBHOOKS_EMPTY_BODY_IOS}))==null?void 0:T.default)==null?void 0:O.Messages,K=p.SETTINGS_WEBHOOKS_EMPTY_BODY_IOS,W={name:"CreateWebhooks",version:k,description:C,onStart(){let t,n;const l=b.after(R,"render",(y,[{theme:c}],i)=>{var d,o,r,a;const S=(o=(d=x(i,m=>{var u;return(u=m==null?void 0:m.screens)==null?void 0:u.WEBHOOKS}))==null?void 0:d.screens)==null?void 0:o.WEBHOOKS;if(S){const m=(a=(r=c==null?void 0:c.colors)==null?void 0:r.text)!=null?a:"#fff";S.headerRight=()=>I.createElement(P,{color:m,title:"\uFF0B",onPress:()=>{var u,w;let s=n||((w=(u=N(t).SELECTABLE.find(f=>M(H,f.channel)))==null?void 0:u.channel)==null?void 0:w.id);s?A(t,s):window.enmity.toast.showToast({content:"Error creating webhook"})}}),b.after(S,"render",(u,w,s)=>{var f,v;t=(f=s==null?void 0:s.props)==null?void 0:f.guildId,n=(v=s==null?void 0:s.props)==null?void 0:v.channelId}),l.unpatchAll()}});p.SETTINGS_WEBHOOKS_EMPTY_BODY_IOS=" "},onStop(){b.unpatchAll(),p.SETTINGS_WEBHOOKS_EMPTY_BODY_IOS=K}};F(W);
